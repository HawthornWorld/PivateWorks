{"remainingRequest":"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/babel-loader/lib/index.js!/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mrc/jsProj/PivateWorks/raymanga/src/pages/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mrc/jsProj/PivateWorks/raymanga/src/pages/Index.vue","mtime":1553509465886},{"path":"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/cache-loader/dist/cjs.js","mtime":1551613478189},{"path":"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/babel-loader/lib/index.js","mtime":1551613443346},{"path":"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/cache-loader/dist/cjs.js","mtime":1551613478189},{"path":"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/vue-loader/lib/index.js","mtime":1551613480809}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mrc/jsProj/PivateWorks/raymanga/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport lang from '../vendors/lang.js';\nimport util from '../vendors/util.js';\nimport BottomPanel from '../components/BottomPanel.vue';\nimport chapterList from '../components/ChapterList.vue';\nimport shareMask from '../components/shareMask.vue';\nexport default {\n  name: 'index',\n  data: function data() {\n    return {\n      bookId: util.getQuery('bookid'),\n      chapterArr: [],\n      bookInfo: {},\n      // btnTxt: this.userLang.btn,\n      classList: ['content'],\n      userLang: {},\n      btnTxtTemp: '',\n      // maxNum: 0\n      isShow: false\n    };\n  },\n  computed: {\n    btnTxt: function btnTxt() {\n      return this.btnTxtTemp;\n    }\n  },\n  mounted: function () {\n    var _mounted = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var langKey;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.getBookInfo();\n\n            case 2:\n              //获取用户设备语言 包含常规浏览器和ie浏览器\n              langKey = (navigator.language || navigator.userLanguage).slice(0, 2); //切换ui至相应语言\n\n              this.userLang = lang[langKey];\n              this.btnTxtTemp = this.userLang.btnOpen; //调用统计首页pv函数\n\n              this.indexPvHandle();\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function mounted() {\n      return _mounted.apply(this, arguments);\n    }\n\n    return mounted;\n  }(),\n  methods: {\n    /**  \n     * 统计首页pv函数,id可从链接获取,ChapterStar.vue有获取cookie uuid工具函数\n    */\n    indexPvHandle: function indexPvHandle() {\n      console.log('index pv');\n    },\n\n    /**\n     * 获取对应bookid书籍信息\n     */\n    getBookInfo: function getBookInfo() {\n      var _this = this;\n\n      var getBookInfo = '//previewapi.raymangaapp.com/previewapi/v1/common/getBookInfo';\n      this.$axios.post(getBookInfo, {\n        book_id: this.bookId\n      }).then(function (res) {\n        /**\n         * 状态码\n         * 1     ：成功\n         * 2000  ：常规错误\n         * 2001  ：参数错误\n         * 2002  ：数据库连接错误\n         */\n        var _res$data = res.data,\n            code = _res$data.code,\n            bookInfo = _res$data.bookInfo;\n\n        if (code === 1) {\n          _this.chapterArr = bookInfo.chapter_list;\n          _this.bookInfo = bookInfo.book_info; // 本书章节最大数\n          // this.maxNum = this.chapterArr[this.chapterArr.length-1].chapter_number\n        } else if (code === 2000) {\n          _this.$toast('常规错误(2000)');\n        } else if (code === 2001) {\n          _this.$toast('参数错误(2001)');\n        } else if (code === 2002) {\n          _this.$toast('数据库连接错误(2002)');\n        }\n      }).catch(function (error) {\n        _this.$toast('网络繁忙，请稍后再试');\n      });\n    },\n\n    /**\n     * 改变展开按钮文本及摘要内容高度\n     */\n    getMore: function getMore() {\n      this.classList = this.classList.indexOf('more') > -1 ? ['content'] : ['content', 'more'];\n      this.btnTxtTemp = this.btnTxtTemp == this.userLang.btnOpen ? this.userLang.btnClose : this.userLang.btnOpen;\n    },\n\n    /**\n     * 点击分享按钮弹出选择平台浮层\n     */\n    popShareMask: function popShareMask() {\n      this.isShow = !this.isShow;\n    }\n  },\n  components: {\n    BottomPanel: BottomPanel,\n    chapterList: chapterList,\n    shareMask: shareMask\n  }\n};",{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"index-wrapper\">\n    <div class=\"cover-wrapper\">\n      <div class=\"cnt\">\n        <div class=\"img-box\">\n          <img class=\"cover-img\" :src=\"`//img1.raymangaapp.com${bookInfo.cover_url}`\" alt=\"\">\n          <span></span>\n        </div>\n        <div class=\"share\" @click=\"popShareMask\">\n          <span class=\"i-share\"></span>\n          <span>share</span>\n        </div>\n        <div class=\"cover-title\">\n          <div class=\"title\">{{bookInfo.book_name}}</div>\n          <div class=\"author\">{{bookInfo.author}}</div>\n        </div>\n      </div>\n      <div class=\"summary\">\n        <span class=\"title\">-INFO-</span>\n        <span :class=\"classList\">{{bookInfo.summary}}</span>\n        <span class=\"btn-more\" @click=\"getMore\">-{{btnTxt}}-</span>\n      </div>\n\n    </div>\n    <chapterList :chapterArr=\"chapterArr\"></chapterList>\n    <BottomPanel :userLang=\"userLang\"></BottomPanel>\n    <shareMask :isMaskShow=\"isShow\" @popShareMask=\"popShareMask\"></shareMask>\n  </div>\n</template>\n\n<script>\nimport lang from '../vendors/lang.js';\nimport util from '../vendors/util.js';\nimport BottomPanel from '../components/BottomPanel.vue';\nimport chapterList from '../components/ChapterList.vue';\nimport shareMask from '../components/shareMask.vue';\n\nexport default {\n  name: 'index',\n  data() {\n    return {\n      bookId: util.getQuery('bookid'),\n      chapterArr: [],\n      bookInfo: {},\n      // btnTxt: this.userLang.btn,\n      classList: ['content'],\n      userLang: {},\n      btnTxtTemp: '',\n      // maxNum: 0\n      isShow: false,\n    };\n  },\n  computed: {\n    btnTxt() {\n      return this.btnTxtTemp;\n    },\n  },\n  async mounted() {\n    await this.getBookInfo();\n    //获取用户设备语言 包含常规浏览器和ie浏览器\n    let langKey = (navigator.language || navigator.userLanguage).slice(0, 2);\n    //切换ui至相应语言\n    this.userLang = lang[langKey];\n    this.btnTxtTemp = this.userLang.btnOpen;\n\n    //调用统计首页pv函数\n    this.indexPvHandle()\n  },\n  methods: {\n    /**  \n     * 统计首页pv函数,id可从链接获取,ChapterStar.vue有获取cookie uuid工具函数\n    */\n    indexPvHandle(){\n      console.log('index pv')\n    },\n    /**\n     * 获取对应bookid书籍信息\n     */\n    getBookInfo() {\n      const getBookInfo =\n        '//previewapi.raymangaapp.com/previewapi/v1/common/getBookInfo';\n      this.$axios\n        .post(getBookInfo, {\n          book_id: this.bookId,\n        })\n        .then(res => {\n          /**\n           * 状态码\n           * 1     ：成功\n           * 2000  ：常规错误\n           * 2001  ：参数错误\n           * 2002  ：数据库连接错误\n           */\n          const { code, bookInfo } = res.data;\n          if (code === 1) {\n            this.chapterArr = bookInfo.chapter_list;\n            this.bookInfo = bookInfo.book_info;\n            // 本书章节最大数\n            // this.maxNum = this.chapterArr[this.chapterArr.length-1].chapter_number\n          } else if (code === 2000) {\n            this.$toast('常规错误(2000)');\n          } else if (code === 2001) {\n            this.$toast('参数错误(2001)');\n          } else if (code === 2002) {\n            this.$toast('数据库连接错误(2002)');\n          }\n        })\n        .catch(error => {\n          this.$toast('网络繁忙，请稍后再试');\n        });\n    },\n    /**\n     * 改变展开按钮文本及摘要内容高度\n     */\n    getMore() {\n      this.classList =\n        this.classList.indexOf('more') > -1 ? ['content'] : ['content', 'more'];\n      this.btnTxtTemp =\n        this.btnTxtTemp == this.userLang.btnOpen\n          ? this.userLang.btnClose\n          : this.userLang.btnOpen;\n    },\n    /**\n     * 点击分享按钮弹出选择平台浮层\n     */\n    popShareMask() {\n      this.isShow = !this.isShow;\n    },\n  },\n  components: {\n    BottomPanel,\n    chapterList,\n    shareMask,\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import '../assets/scss/common.scss';\n\n.index-wrapper {\n  width: 100%;\n  padding-bottom: 60px;\n  overflow-y: auto;\n}\n.cover-wrapper {\n  position: relative;\n  width: 100%;\n  .cnt {\n    position: relative;\n  }\n  .img-box {\n    position: relative;\n    z-index: 0;\n    height: rem(720px);\n    .cover-img {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      font-size: 0;\n    }\n    span {\n      position: absolute;\n      z-index: 3;\n      bottom: -2px;\n      display: inline-block;\n      width: 100%;\n      height: rem(180px);\n      // background: #000;\n      background: linear-gradient(to top, #000, rgba(0, 0, 0, 0));\n    }\n  }\n\n  .cover-title {\n    position: absolute;\n    bottom: rem(20px);\n    z-index: 1;\n    width: 100%;\n    // height: 100%;\n    color: #fff;\n    // padding-top: 188px;\n    .title {\n      font-size: rem(42px);\n      padding: 0 rem(40px);\n      box-sizing: border-box;\n    }\n    .author {\n      color: #ffa800;\n      font-size: rem(40px);\n      font-weight: bold;\n      padding: 0 rem(40px);\n      box-sizing: border-box;\n      &:before {\n        content: '';\n        position: relative;\n        transform: translateY(15%);\n        display: inline-block;\n        width: rem(50px);\n        height: rem(50px);\n        background: url(#{$base}/ic_auther.png) center center no-repeat/100%;\n        margin-right: 3px;\n      }\n    }\n  }\n  .summary {\n    padding: 0 rem(40px);\n    box-sizing: border-box;\n    color: #fff;\n    background: #000;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    .title {\n      font-size: rem(36px);\n      font-weight: bold;\n      @include ellipsis(2);\n    }\n    .content {\n      font-size: rem(32px);\n      @include ellipsis(3);\n    }\n    .content.more {\n      -webkit-line-clamp: 9999999;\n    }\n    .btn-more {\n      font-size: rem(28px);\n    }\n  }\n  .share {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    margin-left: auto;\n    color: #fff;\n\n    position: absolute;\n    top: rem(30px);\n    right: rem(40px);\n    .i-share {\n      display: inline-block;\n      width: rem(64px);\n      height: rem(64px);\n      font-size: rem(24px);\n      background: url(#{$base}/ic_reader_navigation_share_white.png) center\n        center no-repeat/100%;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/pages"}]}